# 耳語 (Whisper) 🕯️

一个像素风格的互动侦探解谜游戏 —— 在谜团与真相之间探寻被埋藏的秘密。

---

## 概述

耳語是一款基于HTML5 Canvas开发的2D像素风格侦探游戏。玩家扮演调查员，在神秘的岛屿上探索，与AI驱动的NPC互动，收集线索，解开跨越50年的连环失踪案。

每13年，岛屿索取其代价。  
七人知道真相。  
六人已经消失。  
一人在说谎。

---

## 核心机制

### 世界系统
- **2400x2400像素开放世界** - 完整可探索的岛屿地图
- **像素级碰撞检测** - 基于RGB通道检测地形（蓝色>100=水域）
- **动态相机跟随** - 平滑跟随玩家视角
- **环境渲染** - 昼夜氛围、动态水面效果

### AI角色系统
7个完全自主的NPC，每个都有独立的AI行为：
- **自主漫游** - 在指定区域内随机移动
- **智能避障** - 检测并避开其他角色和水域
- **动态动画** - 4方向行走动画系统
- **碰撞处理** - 遇到障碍自动改变方向

AI决策循环：
```
初始化 → 随机方向 → 移动 → 碰撞检测 → 回退/继续 → 定时改变方向 → 循环
```

### 交互系统
- **点击移动** - 玩家点击地图任意位置移动
- **NPC对话** - 点击角色触发对话和线索
- **证据收集** - 查看角色档案、财务记录、仪式文件
- **密码谜题** - 解锁关键证据文件

### 渲染引擎
- **纯JavaScript实现** - 无框架依赖
- **Canvas 2D渲染** - 高性能像素绘制
- **分层渲染** - 地形层、角色层、UI层独立绘制
- **像素完美缩放** - 保持像素艺术风格

---

## 游戏哲学

为什么七个人中只有一个说谎？  
为什么每13年必须有人失踪？  
为什么岛屿记得一切，而人类选择遗忘？

真相从不隐藏。  
只是等待被发现。

---

## 故事线索

### 1987年血祭
七人在石圈举行仪式，试图召唤繁荣。  
代价是血。  
汤普森的兄弟成为祭品。

### 13年循环
- 1961年 - 失踪
- 1974年 - 失踪（汤普森的第一次谋杀）
- 1987年 - 仪式之夜
- 2000年 - 失踪
- 2013年 - 失踪
- 2025年 - 威尔逊消失

### 嫌疑人
- **汤普森** - 房地产大亨，每次失踪都获利
- **竹内武** - 寺庙守护者，每月收取1万美元封口费
- **李雪** - 村民，知道岛屿的秘密
- **张伟** - 渔夫，发现鱼群回避北湾
- **王明** - 记者，调查失踪模式
- **陈丽** - 医生，处理"意外"
- **Bernie** - 神秘羊群

---

## 技术架构

### 核心系统
```
游戏循环
├── 输入处理 (鼠标点击/移动)
├── 游戏逻辑更新
│   ├── 玩家移动
│   ├── NPC AI更新
│   ├── 碰撞检测
│   └── 相机更新
└── 渲染管线
    ├── 清空画布
    ├── 绘制世界
    ├── 绘制角色
    └── 绘制UI
```

### 碰撞检测算法
```javascript
// 地形碰撞：读取Canvas像素
const pixelData = ctx.getImageData(x, y, 1, 1).data;
if (pixelData[2] > 100) return false; // 水域

// 角色碰撞：计算距离
const distance = Math.sqrt(dx*dx + dy*dy);
if (distance < 18) collision = true;
```

### NPC AI参数
- `roamRange`: 活动半径（2000-5000像素）
- `speed`: 移动速度（0.15-0.25）
- `directionChangeInterval`: 方向改变频率（80-200帧）

---

## 本地运行

```bash
# 克隆仓库
git clone https://github.com/cellinlabdev/whisper-island.git

# 启动服务器
python -m http.server 8000

# 浏览器访问
http://localhost:8000
```

**注意：** 必须使用HTTP服务器，直接打开HTML会导致CORS错误

---

## 社交媒体

**官网**: [whisperisland.xyz](https://www.whisperisland.xyz/)  
**Twitter/X**: [@WhisperBNB](https://x.com/WhisperBNB)  
**GitHub**: [cellinlabdev](https://github.com/cellinlabdev)

---

## 路线图

### 第一章：发现 ✅
- 核心游戏系统完成
- 7个NPC角色实现
- 基础谜题系统

### 第二章：深入
- 更多隐藏线索
- 扩展对话树
- 成就系统
- 移动端优化

### 第三章：[加密]
- 多人模式
- NFT集成
- 社区创作工具

---

## 互动方式

岛屿在低语。  
你在倾听吗？

打开游戏。  
点击地面移动。  
与角色对话。  
收集线索。  
解开谜团。

简单。直接。  
没有教程打断你的探索。  
没有任务标记告诉你该做什么。  
纯粹的侦探体验。

---

*"十三年过去了。岛屿再次低语。  
真相隐藏在黑暗中，  
等待勇敢者将其带入光明。"*

🕯️ 耳語 🕯️
